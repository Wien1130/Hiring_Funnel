<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Bewerbungs-Funnel (Воронка найма)</title>
  <!-- Tailwind via CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- React + ReactDOM -->
  <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <!-- Framer Motion -->
  <script crossorigin src="https://unpkg.com/framer-motion@11.2.6/dist/framer-motion.umd.js"></script>
  <link rel="icon" href="data:," />
  <style>
    html,body { background: #0b0c0f; }
    .card { background: #111318; border: 1px solid #23262d; }
    .muted { color:#9aa3b2 }
    .grad  { background: linear-gradient(180deg,#0b0c10, #0f1217 40%, #0b0c10); }
    .btn   { background:#1f2937; border:1px solid #2b3240 }
    .btn:hover { background:#263244 }
  </style>
</head>
<body class="text-white grad min-h-screen">
  <div id="app"></div>

  <script>
    const { useState, useMemo } = React;
    const { motion } = window.framerMotion;

    function formatNum(n){ return isNaN(n) ? "—" : n.toLocaleString("de-AT",{minimumFractionDigits:2, maximumFractionDigits:2}); }
    function formatMoney(n){ return isNaN(n) ? "—" : n.toFixed(2)+" €"; }

    function Bar({label,value,max}) {
      const pct = Math.max(2, Math.round((value/Math.max(max,1))*100));
      return (
        React.createElement("div",{className:"w-full mb-3"},
          React.createElement("div",{className:"flex items-center justify-between text-sm mb-1"},
            React.createElement("span",{className:"muted"},label),
            React.createElement("span",{className:"font-medium"},formatNum(value))
          ),
          React.createElement("div",{className:"h-8 rounded-2xl overflow-hidden", style:{background:"#1b1f27"}},
            React.createElement(motion.div,{className:"h-8 rounded-2xl", initial:{width:0}, animate:{width:pct+"%"}, transition:{type:"spring",stiffness:120,damping:18}, style:{background:"#3b82f6"}})
          )
        )
      );
    }

    function Stat({title,value,hint}) {
      return React.createElement("div",{className:"card rounded-2xl p-4"},
        React.createElement("div",{className:"text-sm muted"},title),
        React.createElement("div",{className:"text-2xl font-semibold mt-1"}, value),
        hint ? React.createElement("div",{className:"text-xs muted mt-1"}, hint) : null
      );
    }

    function App(){
      // Defaults (как в твоём примере)
      const [views, setViews] = useState(5333);     // Aufrufe (Просмотры)
      const [cvRate, setCvRate] = useState(3);      // к резюме
      const [intRate, setIntRate] = useState(25);   // к собеседованию
      const [prRate, setPrRate] = useState(10);     // к стажировке
      const [hireRate, setHireRate] = useState(50); // к принятию
      const [adSpend, setAdSpend] = useState(500);  // бюджет €

      const funnel = useMemo(() => {
        const resumes    = +(views * (cvRate/100)).toFixed(2);
        const interviews = +(resumes * (intRate/100)).toFixed(2);
        const practice   = +(interviews * (prRate/100)).toFixed(2);
        const hires      = +(practice * (hireRate/100)).toFixed(2);

        const cpr = resumes    ? adSpend / resumes    : NaN;
        const cpi = interviews ? adSpend / interviews : NaN;
        const cph = hires      ? adSpend / hires      : NaN;

        const maxVal = Math.max(views, resumes, interviews, practice, hires, 1);
        return {views,resumes,interviews,practice,hires,costs:{cpr,cpi,cph},maxVal};
      },[views,cvRate,intRate,prRate,hireRate,adSpend]);

      function reset(){
        setViews(5333); setCvRate(3); setIntRate(25); setPrRate(10); setHireRate(50); setAdSpend(500);
      }

      const inputCls = "w-full bg-transparent border border-slate-700 rounded-xl px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500";

      return (
        React.createElement("div",{className:"mx-auto max-w-6xl p-6 md:p-10 space-y-6"},
          // header
          React.createElement("div",{className:"flex items-center justify-between flex-wrap gap-3"},
            React.createElement("h1",{className:"text-2xl md:text-3xl font-bold"},"Bewerbungs-Funnel (Воронка найма)"),
            React.createElement("button",{onClick:reset,className:"btn rounded-xl px-3 py-2 text-sm"}, "Reset Beispiel (Сброс примера)")
          ),

          // grid
          React.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6"},
            // controls
            React.createElement("div",{className:"card rounded-3xl p-5 space-y-5"},
              React.createElement("div",null,
                React.createElement("label",{className:"block text-sm mb-1"},"Aufrufe (Просмотры)"),
                React.createElement("input",{type:"number",min:0,value:views,onChange:e=>setViews(+e.target.value),className:inputCls})
              ),
              React.createElement("div",{className:"grid grid-cols-2 gap-4"},
                React.createElement("div",null,
                  React.createElement("label",{className:"block text-sm mb-1"},"Bewerbungsrate % (Конверсия в резюме)"),
                  React.createElement("input",{type:"number",min:0,max:100,step:0.1,value:cvRate,onChange:e=>setCvRate(+e.target.value),className:inputCls})
                ),
                React.createElement("div",null,
                  React.createElement("label",{className:"block text-sm mb-1"},"Einladungs-Rate % (Конверсия в собеседования)"),
                  React.createElement("input",{type:"number",min:0,max:100,step:0.1,value:intRate,onChange:e=>setIntRate(+e.target.value),className:inputCls})
                ),
                React.createElement("div",null,
                  React.createElement("label",{className:"block text-sm mb-1"},"Praktikum-Rate % (Конверсия в стажировку)"),
                  React.createElement("input",{type:"number",min:0,max:100,step:0.1,value:prRate,onChange:e=>setPrRate(+e.target.value),className:inputCls})
                ),
                React.createElement("div",null,
                  React.createElement("label",{className:"block text-sm mb-1"},"Einstellungs-Rate % (Конверсия в принятие)"),
                  React.createElement("input",{type:"number",min:0,max:100,step:0.1,value:hireRate,onChange:e=>setHireRate(+e.target.value),className:inputCls})
                )
              ),
              React.createElement("div",null,
                React.createElement("label",{className:"block text-sm mb-1"},"Werbebudget (€) (Бюджет объявления)"),
                React.createElement("input",{type:"number",min:0,step:10,value:adSpend,onChange:e=>setAdSpend(+e.target.value),className:inputCls})
              )
            ),

            // funnel + stats
            React.createElement("div",{className:"lg:col-span-2 space-y-6"},
              React.createElement("div",{className:"card rounded-3xl p-5"},
                React.createElement("h2",{className:"text-lg mb-4"},"Visualisierung (Визуализация)"),
                React.createElement(Bar,{label:"Aufrufe (Просмотры)", value:funnel.views, max:funnel.maxVal}),
                React.createElement(Bar,{label:"Lebensläufe (Резюме)", value:funnel.resumes, max:funnel.maxVal}),
                React.createElement(Bar,{label:"Vorstellungsgespräche (Собеседования)", value:funnel.interviews, max:funnel.maxVal}),
                React.createElement(Bar,{label:"Praktikum (Стажировка)", value:funnel.practice, max:funnel.maxVal}),
                React.createElement(Bar,{label:"Eingestellt (Приняты)", value:funnel.hires, max:funnel.maxVal})
              ),

              React.createElement("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-4"},
                React.createElement(Stat,{title:"Lebensläufe (Резюме)", value:formatNum(funnel.resumes), hint:`CV-Rate: ${cvRate}%`}),
                React.createElement(Stat,{title:"Vorstellungsgespräche (Собеседования)", value:formatNum(funnel.interviews), hint:`Einladungs-Rate: ${intRate}%`}),
                React.createElement(Stat,{title:"Praktikum (Стажировка)", value:formatNum(funnel.practice), hint:`Praktikum-Rate: ${prRate}%`}),
                React.createElement(Stat,{title:"Eingestellt (Приняты)", value:formatNum(funnel.hires), hint:`Einstellungs-Rate: ${hireRate}%`}),
                React.createElement(Stat,{title:"Kosten je Lebenslauf (Цена за резюме)", value:formatMoney(funnel.costs.cpr)}),
                React.createElement(Stat,{title:"Kosten je Einstellung (Цена за сотрудника)", value:formatMoney(funnel.costs.cph)})
              )
            )
          ),

          React.createElement("div",{className:"card rounded-3xl p-5"},
            React.createElement("h2",{className:"text-lg mb-2"},"Hinweise (Подсказки)"),
            React.createElement("p",{className:"muted text-sm"},"• Gib Raten als einfache Zahlen ein, z. B. 25 → 25 %. (Вводи просто числа — 25 = 25 %.)")
          )
        )
      );
    }

    ReactDOM.createRoot(document.getElementById("app")).render(React.createElement(App));
  </script>
</body>
</html>
