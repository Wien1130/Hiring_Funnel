<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Bewerbungs-Funnel (Воронка найма)</title>
  <!-- Tailwind via CDN (достаточно, предупреждение можно игнорировать) -->
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    html,body{background:#0b0c0f}
    .card{background:#111318;border:1px solid #23262d}
    .muted{color:#9aa3b2}
    .grad{background:linear-gradient(180deg,#0b0c10,#0f1217 40%,#0b0c10)}
    .bar {height:32px;border-radius:16px;background:#1b1f27;overflow:hidden}
    .bar > div {height:32px;border-radius:16px;background:#3b82f6;transition:width .4s ease}
    .input {width:100%;background:transparent;border:1px solid #2b3240;border-radius:12px;padding:.5rem .75rem;outline:none}
    .input:focus{box-shadow:0 0 0 2px #3b82f6}
    .btn{background:#1f2937;border:1px solid #2b3240;border-radius:12px;padding:.5rem .75rem}
    .btn:hover{background:#263244}
  </style>
</head>
<body class="text-white grad min-h-screen">
  <div id="app"></div>

  <script>
    const $ = (sel, ctx=document) => ctx.querySelector(sel);

    // форматирование
    const fmtNum = n => isNaN(n) ? "—" : n.toLocaleString("de-AT",{minimumFractionDigits:2,maximumFractionDigits:2});
    const fmtMoney = n => isNaN(n) ? "—" : n.toFixed(2) + " €";

    // исходные значения
    let views=5333, cvRate=3, intRate=25, prRate=10, hireRate=50, adSpend=500;

    function compute(){
      const resumes    = +(views * (cvRate/100)).toFixed(2);
      const interviews = +(resumes * (intRate/100)).toFixed(2);
      const practice   = +(interviews * (prRate/100)).toFixed(2);
      const hires      = +(practice * (hireRate/100)).toFixed(2);

      const cpr = resumes    ? adSpend / resumes    : NaN;
      const cpi = interviews ? adSpend / interviews : NaN;
      const cph = hires      ? adSpend / hires      : NaN;

      const maxVal = Math.max(views,resumes,interviews,practice,hires,1);

      return {views,resumes,interviews,practice,hires,costs:{cpr,cpi,cph},maxVal};
    }

    function render(){
      const s = compute();

      // бары
      setBar("#bar-views",       s.views,       s.maxVal, "Aufrufe (Просмотры)");
      setBar("#bar-resumes",     s.resumes,     s.maxVal, "Lebensläufe (Резюме)");
      setBar("#bar-interviews",  s.interviews,  s.maxVal, "Vorstellungsgespräche (Собеседования)");
      setBar("#bar-practice",    s.practice,    s.maxVal, "Praktikum (Стажировка)");
      setBar("#bar-hires",       s.hires,       s.maxVal, "Eingestellt (Приняты)");

      // статблоки
      $("#stat-resumes").textContent    = fmtNum(s.resumes);
      $("#stat-interviews").textContent = fmtNum(s.interviews);
      $("#stat-practice").textContent   = fmtNum(s.practice);
      $("#stat-hires").textContent      = fmtNum(s.hires);
      $("#cost-cv").textContent         = fmtMoney(s.costs.cpr);
      $("#cost-hire").textContent       = fmtMoney(s.costs.cph);
    }

    function setBar(id, value, max, label){
      const wrap = $(id);
      wrap.querySelector(".label").textContent = label;
      wrap.querySelector(".value").textContent = fmtNum(value);
      const pct = Math.max(2, Math.round((value/Math.max(max,1))*100));
      wrap.querySelector(".bar > div").style.width = pct + "%";
    }

    // шаблон
    $("#app").innerHTML = `
      <div class="mx-auto max-w-6xl p-6 md:p-10 space-y-6">
        <div class="flex items-center justify-between flex-wrap gap-3">
          <h1 class="text-2xl md:text-3xl font-bold">Bewerbungs-Funnel (Воронка найма)</h1>
          <button id="reset" class="btn text-sm">Reset Beispiel (Сброс примера)</button>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
          <div class="card rounded-3xl p-5 space-y-5">
            <div>
              <label class="block text-sm mb-1">Aufrufe (Просмотры)</label>
              <input id="in-views" type="number" min="0" class="input" value="${views}">
            </div>
            <div class="grid grid-cols-2 gap-4">
              <div>
                <label class="block text-sm mb-1">Bewerbungsrate % (Конверсия в резюме)</label>
                <input id="in-cv" type="number" min="0" max="100" step="0.1" class="input" value="${cvRate}">
              </div>
              <div>
                <label class="block text-sm mb-1">Einladungs-Rate % (Конверсия в собеседования)</label>
                <input id="in-int" type="number" min="0" max="100" step="0.1" class="input" value="${intRate}">
              </div>
              <div>
                <label class="block text-sm mb-1">Praktikum-Rate % (Конверсия в стажировку)</label>
                <input id="in-pr" type="number" min="0" max="100" step="0.1" class="input" value="${prRate}">
              </div>
              <div>
                <label class="block text-sm mb-1">Einstellungs-Rate % (Конверсия в принятие)</label>
                <input id="in-hire" type="number" min="0" max="100" step="0.1" class="input" value="${hireRate}">
              </div>
            </div>
            <div>
              <label class="block text-sm mb-1">Werbebudget (€) (Бюджет объявления)</label>
              <input id="in-ad" type="number" min="0" step="10" class="input" value="${adSpend}">
            </div>
          </div>

          <div class="lg:col-span-2 space-y-6">
            <div class="card rounded-3xl p-5">
              <h2 class="text-lg mb-4">Visualisierung (Визуализация)</h2>

              <div id="bar-views" class="w-full mb-3">
                <div class="flex items-center justify-between text-sm mb-1">
                  <span class="label muted"></span>
                  <span class="value font-medium"></span>
                </div>
                <div class="bar"><div style="width:0%"></div></div>
              </div>

              <div id="bar-resumes" class="w-full mb-3">
                <div class="flex items-center justify-between text-sm mb-1">
                  <span class="label muted"></span>
                  <span class="value font-medium"></span>
                </div>
                <div class="bar"><div style="width:0%"></div></div>
              </div>

              <div id="bar-interviews" class="w-full mb-3">
                <div class="flex items-center justify-between text-sm mb-1">
                  <span class="label muted"></span>
                  <span class="value font-medium"></span>
                </div>
                <div class="bar"><div style="width:0%"></div></div>
              </div>

              <div id="bar-practice" class="w-full mb-3">
                <div class="flex items-center justify-between text-sm mb-1">
                  <span class="label muted"></span>
                  <span class="value font-medium"></span>
                </div>
                <div class="bar"><div style="width:0%"></div></div>
              </div>

              <div id="bar-hires" class="w-full">
                <div class="flex items-center justify-between text-sm mb-1">
                  <span class="label muted"></span>
                  <span class="value font-medium"></span>
                </div>
                <div class="bar"><div style="width:0%"></div></div>
              </div>
            </div>

            <div class="grid sm:grid-cols-2 lg:grid-cols-3 gap-4">
              <div class="card rounded-2xl p-4">
                <div class="text-sm muted">Lebensläufe (Резюме)</div>
                <div id="stat-resumes" class="text-2xl font-semibold mt-1">—</div>
                <div class="text-xs muted mt-1">CV-Rate: <span id="hint-cv">${cvRate}</span>%</div>
              </div>
              <div class="card rounded-2xl p-4">
                <div class="text-sm muted">Vorstellungsgespräche (Собеседования)</div>
                <div id="stat-interviews" class="text-2xl font-semibold mt-1">—</div>
                <div class="text-xs muted mt-1">Einladungs-Rate: <span id="hint-int">${intRate}</span>%</div>
              </div>
              <div class="card rounded-2xl p-4">
                <div class="text-sm muted">Praktikum (Стажировка)</div>
                <div id="stat-practice" class="text-2xl font-semibold mt-1">—</div>
                <div class="text-xs muted mt-1">Praktikum-Rate: <span id="hint-pr">${prRate}</span>%</div>
              </div>
              <div class="card rounded-2xl p-4">
                <div class="text-sm muted">Eingestellt (Приняты)</div>
                <div id="stat-hires" class="text-2xl font-semibold mt-1">—</div>
                <div class="text-xs muted mt-1">Einstellungs-Rate: <span id="hint-hire">${hireRate}</span>%</div>
              </div>
              <div class="card rounded-2xl p-4">
                <div class="text-sm muted">Kosten je Lebenslauf (Цена за резюме)</div>
                <div id="cost-cv" class="text-2xl font-semibold mt-1">—</div>
              </div>
              <div class="card rounded-2xl p-4">
                <div class="text-sm muted">Kosten je Einstellung (Цена за сотрудника)</div>
                <div id="cost-hire" class="text-2xl font-semibold mt-1">—</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    `;

    // события
    $("#in-views").addEventListener("input", e => { views = +e.target.value; render(); });
    $("#in-cv").addEventListener("input", e => { cvRate = +e.target.value; $("#hint-cv").textContent=cvRate; render(); });
    $("#in-int").addEventListener("input", e => { intRate = +e.target.value; $("#hint-int").textContent=intRate; render(); });
    $("#in-pr").addEventListener("input", e => { prRate = +e.target.value; $("#hint-pr").textContent=prRate; render(); });
    $("#in-hire").addEventListener("input", e => { hireRate = +e.target.value; $("#hint-hire").textContent=hireRate; render(); });
    $("#in-ad").addEventListener("input", e => { adSpend = +e.target.value; render(); });
    $("#reset").addEventListener("click", () => { views=5333; cvRate=3; intRate=25; prRate=10; hireRate=50; adSpend=500;
      $("#in-views").value=views; $("#in-cv").value=cvRate; $("#in-int").value=intRate; $("#in-pr").value=prRate; $("#in-hire").value=hireRate; $("#in-ad").value=adSpend;
      $("#hint-cv").textContent=cvRate; $("#hint-int").textContent=intRate; $("#hint-pr").textContent=prRate; $("#hint-hire").textContent=hireRate;
      render();
    });

    render();
  </script>
</body>
</html>
